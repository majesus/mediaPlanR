% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calc_canex.R
\encoding{UTF-8}
\name{calc_canex}
\alias{calc_canex}
\title{Calcular Modelo CANEX}
\usage{
calc_canex(vehicles_data, duplications, poblacion = 1e+06)
}
\arguments{
\item{vehicles_data}{Marco de datos que contiene datos de vehículos de medios con columnas:
\itemize{
\item k: Número de inserciones por vehículo (entero)
\item R1: Alcance de inserción tras primera inserción (0-1)
\item R2: Alcance de inserción tras segunda inserción (0-1)
}}

\item{duplications}{Matriz. Matriz de duplicación de vehículos donde el elemento \link{i,j} representa
la proporción de población expuesta a ambos vehículos i y j}

\item{poblacion}{Entero. Tamaño de la población objetivo (predeterminado: 1,000,000)}
}
\value{
Lista con componentes:
\itemize{
\item total_reach: Proporción de población alcanzada (0-1)
\item total_reach_people: Número de personas alcanzadas
\item distribution: Marco de datos con columnas:
\itemize{
\item contacts: Número de exposiciones
\item percentage: Porcentaje de población
\item people: Número de personas
}
\item cumulative: Marco de datos con columnas:
\itemize{
\item min_contacts: Número mínimo de exposiciones
\item percentage: Porcentaje acumulado
\item people: Número acumulado de personas
}
\item stats: Lista con métricas adicionales:
\itemize{
\item avg_contacts: Contactos promedio por persona alcanzada
\item zero_contacts_prob: Probabilidad de cero contactos
}
}
}
\description{
Función principal que implementa los cálculos del modelo CANEX (Correlación Ajustada para n EXposiciones).
Este modelo calcula la distribución de alcance y frecuencia considerando la heterogeneidad y duplicaciones y correlaciones
entre vehículos de medios.
}
\details{
El modelo CANEX integra tres componentes clave:
\itemize{
\item Distribución Beta Binomial (BBD) para modelar la heterogeneidad de exposición
\item Duplicaciones de vehículos a través de coeficientes de duplicación y correlación
\item Ajuste multivariado para probabilidades conjuntas
}

El modelo sigue estos pasos:
\enumerate{
\item Calcular parámetros BBD (alfa, beta) para cada vehículo
\item Transformar matriz de duplicación a correlaciones
\item Generar distribución de probabilidad conjunta
\item Calcular métricas de alcance y frecuencia
}
}
\examples{
# Ejemplo 1: Uso básico con dos vehículos
vehicles <- data.frame(
  k = c(2, 2),
  R1 = c(0.4902, 0.033),
  R2 = c(0.5805, 0.0502)
)
duplications <- matrix(
  c(1.000, 0.0157,
    0.0157, 1.000),
  nrow = 2, byrow = TRUE
)
results <- calc_canex(vehicles, duplications)
print(results)

# Ejemplo 2: Tres vehículos con población personalizada
vehicles2 <- data.frame(
  k = c(2, 2, 2),
  R1 = c(0.4902, 0.033, 0.0300),
  R2 = c(0.5805, 0.0502, 0.0371)
)
duplications2 <- matrix(
  c(1.000, 0.0157, 0.0139,
    0.0157, 1.000, 0.0003,
    0.0139, 0.0003, 1.000),
  nrow = 3, byrow = TRUE
)
results2 <- calc_canex(vehicles2, duplications2, poblacion = 500000)

# Acceder a métricas específicas
total_reach <- results2$total_reach
avg_contacts <- results2$stats$avg_contacts
dist_table <- results2$distribution

}
\references{
Danaher, P. J. (1991). A canonical expansion model for multivariate media exposure
distributions: A generalization of the "duplication of viewing law."
Journal of Marketing Research, 28(3), 361–367.
}
\seealso{
\code{\link{calculate_bbd_params}} para el cálculo de parámetros BBD
\code{\link{transform_duplications}} para la transformación de matriz de duplicación
\code{\link{calculate_metrics}} para el cálculo detallado de métricas
}
