% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calc_canex.R
\encoding{UTF-8}
\name{calc_canex}
\alias{calc_canex}
\title{Calculate CANEX Model}
\usage{
calc_canex(vehicles_data, duplications, poblacion = 1e+06)
}
\arguments{
\item{vehicles_data}{Data frame containing media vehicle data with columns:
\itemize{
\item k: Number of insertions per vehicle (integer)
\item R1: Single insertion reach (0-1)
\item R2: Double insertion reach (0-1)
}}

\item{duplications}{Matrix. Vehicle duplication matrix where element \link{i,j} represents
the proportion of population exposed to both vehicle i and j}

\item{poblacion}{Integer. Target population size (default: 1,000,000)}
}
\value{
List with components:
\itemize{
\item total_reach: Proportion of population reached (0-1)
\item total_reach_people: Number of people reached
\item distribution: Data frame with columns:
\itemize{
\item contacts: Number of exposures
\item percentage: Percentage of population
\item people: Number of people
}
\item cumulative: Data frame with columns:
\itemize{
\item min_contacts: Minimum number of exposures
\item percentage: Cumulative percentage
\item people: Cumulative number of people
}
\item stats: List with additional metrics:
\itemize{
\item avg_contacts: Average contacts per person reached
\item zero_contacts_prob: Probability of zero contacts
}
}
}
\description{
Main function implementing CANEX (Correlation Adjusted for N EXposures) model calculations.
This model calculates reach and frequency distribution considering heterogeneity and correlations
between media vehicles.
}
\details{
The CANEX model integrates three key components:
\itemize{
\item Beta Binomial Distribution (BBD) to model exposure heterogeneity
\item Vehicle duplications through correlation coefficients
\item Multivariate adjustment for joint probabilities
}

The model follows these steps:
\enumerate{
\item Calculate BBD parameters (alpha, beta) for each vehicle
\item Transform duplication matrix to correlations
\item Generate joint probability distribution
\item Calculate reach and frequency metrics
}
}
\examples{
# Example 1: Basic usage with two vehicles
vehicles <- data.frame(
  k = c(2, 2),
  R1 = c(0.4902, 0.033),
  R2 = c(0.5805, 0.0502)
)
duplications <- matrix(
  c(1.000, 0.0157,
    0.0157, 1.000),
  nrow = 2, byrow = TRUE
)
results <- calc_canex(vehicles, duplications)
print(results)

# Example 2: Three vehicles with custom population
vehicles2 <- data.frame(
  k = c(2, 2, 2),
  R1 = c(0.4902, 0.033, 0.0300),
  R2 = c(0.5805, 0.0502, 0.0371)
)
duplications2 <- matrix(
  c(1.000, 0.0157, 0.0139,
    0.0157, 1.000, 0.0003,
    0.0139, 0.0003, 1.000),
  nrow = 3, byrow = TRUE
)
results2 <- calc_canex(vehicles2, duplications2, poblacion = 500000)

# Access specific metrics
total_reach <- results2$total_reach
avg_contacts <- results2$stats$avg_contacts
dist_table <- results2$distribution

}
\references{
Danaher, P. J. (1991). A canonical expansion model for multivariate media exposure
distributions: A generalization of the "duplication of viewing law."
Journal of Marketing Research, 28(3), 361â€“367.
}
\seealso{
\code{\link{calculate_bbd_params}} for BBD parameter calculation
\code{\link{transform_duplications}} for duplication matrix transformation
\code{\link{calculate_metrics}} for detailed metrics calculation
}
