% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/model_optimization.R
\encoding{UTF-8}
\name{optimizar_dc}
\alias{optimizar_dc}
\title{Optimización de distribución de contactos acumulada mediante modelo Beta-Binomial}
\usage{
optimizar_dc(
  Pob,
  FEM,
  cob_efectiva,
  A1,
  max_inserciones,
  tolerancia = 0.05,
  step_A = 0.1,
  step_B = 0.1,
  batch_size = 1e+06,
  min_soluciones = 10,
  error_aceptable = 0.01
)
}
\arguments{
\item{Pob}{Tamaño de la población}

\item{FEM}{Frecuencia efectiva mínima (FEM, número mínimo de impactos por persona)}

\item{cob_efectiva}{Número objetivo de personas a alcanzar con FEM o más contactos}

\item{A1}{Audiencia tras la primera inserción}

\item{max_inserciones}{Número de inserciones máximo a considerar}

\item{tolerancia}{Margen de error permitido en las soluciones (default: 0.05)}

\item{step_A}{Incremento para búsqueda del parámetro alpha (default: 0.1)}

\item{step_B}{Incremento para búsqueda del parámetro beta (default: 0.1)}

\item{batch_size}{Tamaño del lote para procesamiento (default: 1000000)}

\item{min_soluciones}{Número mínimo de soluciones para parar (default: 10)}

\item{error_aceptable}{Error aceptable como proporción (default: 0.01)}
}
\value{
Una lista con los siguientes componentes:
\itemize{
\item mejores_combinaciones: Data frame con todas las combinaciones válidas de
parámetros, incluyendo:
\itemize{
\item n: Número de inserciones
\item x: Frecuencia efectiva mínima
\item alpha: Parámetro alpha del modelo
\item beta: Parámetro beta del modelo
\item R1: Proporción de personas alcanzadas tras la primera inserción
\item R2: Proporción de personas alcanzadas tras la segunda inserción
\item prob: Probabilidad acumulada (FEM o más contactos)
\item distancia_objetivo: Diferencia absoluta con respecto al objetivo
}
\item mejores_combinaciones_top_10: Las 10 mejores combinaciones según criterios
\item data: Data frame con la distribución de contactos final, incluyendo:
\itemize{
\item inserciones: Número de inserciones
\item d_probabilidad: Distribución de probabilidad
\item dc_acumulada: Distribución acumulada
}
\item alpha: Valor óptimo seleccionado para alpha
\item beta: Valor óptimo seleccionado para beta
\item n_optimo: Número óptimo de inserciones
}
}
\description{
Esta función optimiza la distribución de contactos publicitarios y calcula
los coeficientes de duplicación (R1 y R2) utilizando la distribución Beta-Binomial.
El proceso busca la mejor combinación de parámetros alpha y beta y número de inserciones que satisfaga
los criterios de cobertura efectiva y frecuencia efectiva mínima (FEM) especificados por el usuario.
La función calcula la cobertura acumulada para individuos que han visto el anuncio FEM o más veces.
}
\details{
La función realiza los siguientes pasos:
\enumerate{
\item Validación de parámetros de entrada y dependencias
\item Cálculo de valores objetivo normalizados y tolerancias
\item Generación de combinaciones de parámetros (alpha, beta, n)
\item Cálculo de distribuciones Beta-Binomiales por lotes
\item Suma acumulada de probabilidades para k mayor o igual que FEM
\item Filtrado de resultados según criterios especificados
\item Cálculo de coeficientes R1 y R2 para soluciones válidas
\item Selección de mejor solución y generación de distribución final
}
}
\note{
Esta función difiere de optimizar_d en que:
\itemize{
\item Utiliza FEM en lugar de FE
\item Calcula coberturas acumuladas (personas que ven el anuncio FEM o más veces)
\item La optimización considera la suma de probabilidades para k mayor o igual que FEM
}
}
\examples{
\donttest{
# Ejemplo 1: Optimización para cobertura acumulada
resultado1 <- optimizar_dc(
  Pob = 1000000,         # Población de 1 millón
  FEM = 3,               # Frecuencia efectiva mínima de 3
  cob_efectiva = 600000, # Objetivo: 600,000 personas con 3+ contactos
  A1 = 450000,           # Primera audiencia: 450,000
  max_inserciones = 8    # Máximo 8 inserciones
)

# Ejemplo 2: Caso con mayor precisión
resultado2 <- optimizar_dc(
  Pob = 500000,
  FEM = 4,
  cob_efectiva = 250000,
  A1 = 200000,
  max_inserciones = 10,
  tolerancia = 0.03,     # Menor tolerancia
  step_A = 0.05,         # Pasos más pequeños
  step_B = 0.05,
  min_soluciones = 15    # Más soluciones requeridas
)

# Comparar probabilidades acumuladas vs objetivo
print(data.frame(
  Objetivo = resultado2$cob_efectiva,
  Logrado = resultado2$mejores_combinaciones[1, "prob"],
  Error = abs(resultado2$mejores_combinaciones[1, "distancia_objetivo"])
))
}

}
\references{
Leckenby, J. D., & Boyd, M. M. (1984). An improved beta binomial reach/frequency model for magazines.
Current Issues and Research in Advertising, 7(1), 1-24.
}
\seealso{
\code{\link{optimizar_d}} para optimización con frecuencia efectiva exacta
\code{\link{calc_R1_R2}} para detalles sobre el cálculo de coeficientes de duplicación
}
