% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/model_optimization.R,
%   R/model_optimization_old.R
\encoding{UTF-8}
\name{optimizar_d}
\alias{optimizar_d}
\title{Optimización de distribución de contactos mediante modelo Beta-Binomial}
\usage{
optimizar_d(
  Pob,
  FE,
  cob_efectiva,
  A1,
  max_inserciones,
  tolerancia = 0.05,
  step_A = 0.025,
  step_B = 0.025
)

optimizar_d(
  Pob,
  FE,
  cob_efectiva,
  A1,
  max_inserciones,
  tolerancia = 0.05,
  step_A = 0.025,
  step_B = 0.025
)
}
\arguments{
\item{Pob}{Tamaño de la población}

\item{FE}{Frecuencia efectiva (FE, número objetivo de impactos por persona)}

\item{cob_efectiva}{Número objetivo de personas a alcanzar con FE contactos}

\item{A1}{Audiencia tras la primera inserción}

\item{max_inserciones}{Número de inserciones máximo a considerar (default: 5)}

\item{tolerancia}{Margen de error permitido en las soluciones (default: 0.05)}

\item{step_A}{Incremento para búsqueda del parámetro alpha (default: 0.025)}

\item{step_B}{Incremento para búsqueda del parámetro beta (default: 0.025)}

\item{batch_size}{Tamaño del lote para procesamiento (default: 1000000)}

\item{min_soluciones}{Número mínimo de soluciones para parar (default: 10)}

\item{error_aceptable}{Error aceptable como proporción (default: 0.01)}
}
\value{
Una lista con los siguientes componentes:
\itemize{
\item mejores_combinaciones: Data frame con todas las combinaciones válidas de
parámetros, incluyendo:
\itemize{
\item n: Número de inserciones
\item x: Frecuencia efectiva
\item alpha: Parámetro alpha del modelo
\item beta: Parámetro beta del modelo
\item R1: Proporción de personas alcanzadas tras la primera inserción
\item R2: Proporción de personas alcanzadas tras la segunda inserción
\item prob: Probabilidad asociada
\item distancia_objetivo: Diferencia absoluta con respecto al objetivo
}
\item mejores_combinaciones_top_10: Las 10 mejores combinaciones según criterios
\item data: Data frame con la distribución de contactos final
\item alpha: Valor óptimo seleccionado para alpha
\item beta: Valor óptimo seleccionado para beta
\item n_optimo: Número óptimo de inserciones
}

Una lista con los siguientes componentes:
\itemize{
\item mejores_combinaciones: Data frame con todas las combinaciones válidas de
parámetros, incluyendo:
\itemize{
\item x: Número de contactos
\item alpha: Parámetro alpha del modelo
\item beta: Parámetro beta del modelo
\item R1: Proporción de personas alcanzadas tras la primera inserción
\item R2: Proporción de personas alcanzadas tras la segunda inserción
\item prob: Probabilidad asociada
}
\item mejores_combinaciones_top_10: Las 10 mejores combinaciones según criterios y valores establecidos
\item data: Data frame con la distribución de contactos
\item alpha: Valor seleccionado para alpha
\item beta: Valor seleccionado para beta
}
}
\description{
Esta función optimiza la distribución de contactos publicitarios y calcula
los coeficientes de duplicación (R1 y R2) utilizando la distribución Beta-Binomial.
El proceso busca la mejor combinación de parámetros alpha y beta y número de inserciones que satisfaga
los criterios de cobertura efectiva y frecuencia efectiva (FE) especificados por el usuario.

Esta función optimiza la distribución de contactos publicitarios y calcula
los coeficientes de duplicación (R1 y R2) utilizando la distribución Beta-Binomial.
El proceso busca la mejor combinación de parámetros alpha y beta y número de inserciones que satisfaga
los criterios de cobertura efectiva y frecuencia efectiva (FE) especificados por el usuario.
}
\details{
La función realiza los siguientes pasos:
\enumerate{
\item Validación de parámetros de entrada y dependencias
\item Cálculo de valores objetivo normalizados y tolerancias
\item Generación de combinaciones de parámetros (alpha, beta, n)
\item Cálculo de distribuciones Beta-Binomiales por lotes
\item Filtrado de resultados según criterios especificados
\item Cálculo de coeficientes R1 y R2 para soluciones válidas
\item Selección de mejor solución y generación de distribución final
}

La función realiza los siguientes pasos:
\enumerate{
\item Genera combinaciones de parámetros (alpha, beta) dentro de rangos especificados
\item Calcula distribuciones Beta-Binomiales para cada combinación
\item Filtra resultados según criterios de cobertura y frecuencia
\item Calcula coeficientes R1 y R2
\item Genera visualizaciones de la distribución resultante
}
}
\note{
Los parámetros alpha y beta controlan la forma de la distribución Beta-Binomial:
\itemize{
\item alpha: Controla la asimetría hacia valores altos de probabilidad
\item beta: Controla la asimetría hacia valores bajos de probabilidad
\item La combinación de ambos determina la dispersión y forma final
}

La función utiliza procesamiento por lotes para optimizar el uso de memoria
y proporciona información de progreso durante la ejecución.

Los parámetros alpha y beta controlan la forma de la distribución Beta-Binomial:
\itemize{
\item alpha: Cuando el valor de alpha aumenta (manteniendo beta constante), se produce una asimetría hacia valores más altos de p (es decir, el éxito es más probable). Esto implica que alpha efectivamente influye en la asimetría, pero en combinación con beta.
\item beta: Cuando beta aumenta (y alpha se mantiene constante), se produce una asimetría hacia valores más bajos de p. En este sentido, beta también afecta la asimetría de la distribución beta.
}
}
\examples{
\dontrun{
# Ejemplo 1: Caso básico con población pequeña
resultado1 <- optimizar_d(
  Pob = 100000,          # Población de 100 mil
  FE = 3,                # Frecuencia efectiva de 3
  cob_efectiva = 59000,  # Objetivo: 59\% de cobertura
  A1 = 50000,            # Primera audiencia: 50\%
  max_inserciones = 5    # Máximo 5 inserciones
)

# Examinar resultados
print(head(resultado1$mejores_combinaciones))
print(resultado1$data)

# Ejemplo 2: Caso con mayor precisión
resultado2 <- optimizar_d(
  Pob = 1000000,
  FE = 4,
  cob_efectiva = 600000,
  A1 = 450000,
  max_inserciones = 8,
  tolerancia = 0.03,     # Menor tolerancia
  step_A = 0.01,         # Pasos más pequeños
  step_B = 0.01,
  min_soluciones = 20    # Más soluciones requeridas
)
}

\dontrun{
# Ejemplo básico
resultado <- optimizar_d(
  Pob = 1000000,           # Población de 1 millón
  FE = 3,                  # Frecuencia efectiva de 3 contactos
  cob_efectiva = 590000,   # Objetivo: alcanzar 590,000 personas
  A1 = 500000,             # Audiencia primera inserción: 500,000
  max_inserciones = 5      # Número de inserciones máximo a considerar: 5
)

# Examinar resultados
print(head(resultado$mejores_combinaciones))
print(resultado$data)
}

}
\references{
Leckenby, J. D., & Boyd, M. M. (1984). An improved beta binomial reach/frequency model for magazines.
Current Issues and Research in Advertising, 7(1), 1-24.
}
\seealso{
\code{\link{calc_R1_R2}} para detalles sobre el cálculo de coeficientes de duplicación

\code{\link{calc_R1_R2}} para los cálculos de R1 y R2
}
